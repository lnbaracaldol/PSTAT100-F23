<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="PSTAT100">

<title>PSTAT100 - Course syllabus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-H3YKZX4J88"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-H3YKZX4J88', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PSTAT100</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./about.html" rel="" target="" aria-current="page">
 <span class="menu-text">Course syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./content.html" rel="" target="">
 <span class="menu-text">Materials</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#staff-and-class-meetings" id="toc-staff-and-class-meetings" class="nav-link active" data-scroll-target="#staff-and-class-meetings">Staff and class meetings</a></li>
  <li><a href="#content-and-materials" id="toc-content-and-materials" class="nav-link" data-scroll-target="#content-and-materials">Content and materials</a>
  <ul class="collapse">
  <li><a href="#catalog-description" id="toc-catalog-description" class="nav-link" data-scroll-target="#catalog-description">Catalog description</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#learning-outcomes" id="toc-learning-outcomes" class="nav-link" data-scroll-target="#learning-outcomes">Learning outcomes</a></li>
  <li><a href="#assessments" id="toc-assessments" class="nav-link" data-scroll-target="#assessments">Assessments</a></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#materials" id="toc-materials" class="nav-link" data-scroll-target="#materials">Materials</a></li>
  <li><a href="#software" id="toc-software" class="nav-link" data-scroll-target="#software">Software</a></li>
  </ul></li>
  <li><a href="#policies" id="toc-policies" class="nav-link" data-scroll-target="#policies">Policies</a>
  <ul class="collapse">
  <li><a href="#communication" id="toc-communication" class="nav-link" data-scroll-target="#communication">Communication</a></li>
  <li><a href="#expected-time-commitment" id="toc-expected-time-commitment" class="nav-link" data-scroll-target="#expected-time-commitment">Expected time commitment</a></li>
  <li><a href="#scores-and-grades" id="toc-scores-and-grades" class="nav-link" data-scroll-target="#scores-and-grades">Scores and grades</a></li>
  <li><a href="#conduct" id="toc-conduct" class="nav-link" data-scroll-target="#conduct">Conduct</a></li>
  <li><a href="#deadlines-and-late-work" id="toc-deadlines-and-late-work" class="nav-link" data-scroll-target="#deadlines-and-late-work">Deadlines and late work</a></li>
  <li><a href="#accommodations" id="toc-accommodations" class="nav-link" data-scroll-target="#accommodations">Accommodations</a></li>
  <li><a href="#feedback" id="toc-feedback" class="nav-link" data-scroll-target="#feedback">Feedback</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Course syllabus</h1>
<p class="subtitle lead">Data Science Concepts and Analysis</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Course listing</div>
    <div class="quarto-title-meta-contents">
             <p>PSTAT100 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Updated</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="staff-and-class-meetings" class="level2">
<h2 class="anchored" data-anchor-id="staff-and-class-meetings">Staff and class meetings</h2>
<p><strong>Instructor</strong>: Laura Baracaldo</p>
<p><strong>Teaching assistants</strong>: Lauren Hughes, Zimo Zhu, and Christopher Muzquiz</p>
<p><strong>Class meetings</strong>: MW 9:30am - 10:45am BUCHN1920.</p>
<p><strong>Section meetings</strong>:</p>
<ul>
<li>R 8:00am - 8:50am, ILP 3103 (Lauren)</li>
<li>R 9:00am - 9:50am, ILP 3205 (Zimo)</li>
<li>R 10:00am - 10:50am, GIRV 2127 (Zimo)</li>
<li>R 11:00am - 11:50am, NH 1109 (Lauren)</li>
<li>R 12:00am - 12:50am, NH 1109 (Christopher)</li>
</ul>
<p><strong>Office hours</strong>:</p>
<p>Laura Baracaldo: Old Gym 1201. W 3:30pm - 4:30pm, or by appointment</p>
<p>Lauren Hughes: TBA or by appointment</p>
<p>Zimo Zhu: TBA or by appointment</p>
<p>Christopher Muzquiz: TBA or by appointment</p>
</section>
<section id="content-and-materials" class="level2">
<h2 class="anchored" data-anchor-id="content-and-materials">Content and materials</h2>
<p>Data Science Concepts and Analysis (PSTAT100) is a hands-on introduction to data science intended for intermediate-level students from any discipline with some exposure to probability and basic computing skills, but few or no upper-division courses in statistics or computer science. The course introduces central concepts in statistics – such as sampling variation, uncertainty, and inference – in an applied setting together with techniques for data exploration and analysis. Applications emphasize end-to-end data analyses. Course activities model standard data science workflow practices by example, and successful students acquire programming skills, project management skills, and subject exposure that will serve them well in upper-division courses as well as in independent research or projects.</p>
<section id="catalog-description" class="level3">
<h3 class="anchored" data-anchor-id="catalog-description">Catalog description</h3>
<p>Overview of data science key concepts and the use of tools for data retrieval, analysis, visualization, and reproducible research. Topics include an introduction to inference and prediction, principles of measurement, missing data, and notions of causality, statistical “traps”, and concepts in data ethics and privacy. Case studies will illustrate the importance of domain knowledge. Credit units: 4.</p>
</section>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisites</h3>
<ul>
<li>Probability and Statistics I (PSTAT 120A)</li>
<li>Linear Algebra (MATH 4A)</li>
<li>Prior experience with Python or another programming language (CMPSC 9 or CMPSC 16).</li>
</ul>
</section>
<section id="learning-outcomes" class="level3">
<h3 class="anchored" data-anchor-id="learning-outcomes">Learning outcomes</h3>
<p>Successful students will establish foundational data science skills:</p>
<ul>
<li>critical assessment of data quality and sampling design</li>
<li>retrieval, inspection, and cleaning of raw data</li>
<li>exploratory, descriptive, visual, and inferential techniques</li>
<li>interpretation and communication of results in context</li>
</ul>
<p>These skills will be discussed in depth during course lectures; students will practice them through lab activities, homework assignments, and project work.</p>
</section>
<section id="assessments" class="level3">
<h3 class="anchored" data-anchor-id="assessments">Assessments</h3>
<p>Attainment of course learning outcomes will be measured by assessment of submitted work. Submitted work falls into four categories:</p>
<ul>
<li><strong>Labs (not graded)</strong> will be assigned weekly in most weeks. These are structured coding assignments with small exercises throughout that introduce the programming skills needed to complete homework assignments.</li>
<li><strong>Homeworks</strong> will be assigned biweekly. These are fairly involved assignments which apply concepts and techniques from the lectures and programming skills from the labs to real data sets in order to reproduce an analysis and answer substantive questions. Collaboration is encouraged, but students must write up and submit their own work individually.</li>
<li><strong>Mini projects</strong> will be assigned biweekly in alternation with homeworks. These assignments prompt students to use skills from the course in an unstructured setting to answer high-level questions pertaining to one or more datasets. Mini projects should be completed collaboratively.</li>
<li>A <strong>course project</strong> will be assigned requiring students to carry out an open-ended data analysis. This will be completed in teams.</li>
</ul>
<p>Overall scores in the course will be calculated for each student as the weighted average of scores on all submitted work; the relative weighting and letter grade assignments will depend entirely on the score distribution of the class as a whole and as such reflect each student’s performance relative to their peers.</p>
</section>
<section id="schedule" class="level3">
<h3 class="anchored" data-anchor-id="schedule">Schedule</h3>
<p>The tentative topic and assignment schedule is given below. Assignments are indicated by due date: all assignments are due by Monday 11:59pm in the week indicated. Late submissions are allowed, with a possible penalty, for up to 24 hours.</p>
<p>The schedule is subject to change based on the progress of the class.</p>
<table class="table">
<thead>
<tr class="header">
<th>Week</th>
<th>Topic</th>
<th>Lab</th>
<th>Homework</th>
<th>Project</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Data science life cycle</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Tidy data</td>
<td>L0</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Sampling and bias</td>
<td>L1</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>Statistical graphics</td>
<td>L2</td>
<td>H1</td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Kernel density estimation</td>
<td>L3</td>
<td></td>
<td>MP1</td>
</tr>
<tr class="even">
<td>6</td>
<td>Principal components</td>
<td>L4</td>
<td>H2</td>
<td></td>
</tr>
<tr class="odd">
<td>7</td>
<td>Simple regression</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>8</td>
<td>Multiple regression</td>
<td>L5</td>
<td>H3</td>
<td></td>
</tr>
<tr class="odd">
<td>9</td>
<td>Classification and clustering</td>
<td>L6</td>
<td></td>
<td>MP2</td>
</tr>
<tr class="even">
<td>10</td>
<td>Case study</td>
<td>L7</td>
<td>H4</td>
<td></td>
</tr>
<tr class="odd">
<td>11</td>
<td>Finals</td>
<td></td>
<td></td>
<td>CP</td>
</tr>
</tbody>
</table>
<ul>
<li>L: lab</li>
<li>H: homework</li>
<li>MP: mini project</li>
<li>CP: course project</li>
</ul>
</section>
<section id="materials" class="level3">
<h3 class="anchored" data-anchor-id="materials">Materials</h3>
<p>The course website will link to all course content and resources. Readings for the course will draw on multiple sources, including:</p>
<ul>
<li><a href="https://jakevdp.github.io/PythonDataScienceHandbook/">Python Data Science Handbook</a> (PDSH);</li>
<li><a href="https://learningds.org/intro.html">Learning Data Science</a> (LDS);</li>
<li>collected articles distributed as assigned.</li>
</ul>
</section>
<section id="software" class="level3">
<h3 class="anchored" data-anchor-id="software">Software</h3>
<p>Computing will be hosted via the course LSIT server <a href="https://pstat100.lsit.ucsb.edu">pstat100.lsit.ucsb.edu</a>. Students need only a web browser and stable internet connection to complete all course work. <strong>It is strongly recommended that students download backup copies of their assignments from the LSIT server.</strong></p>
<p>Interested students are encouraged to install the software needed to open, edit, and execute notebooks on their own machine, in particular:</p>
<ul>
<li><a href="https://www.python.org/downloads/">a Python install</a>;</li>
<li>(recommended) <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a></li>
<li><a href="https://jupyter.org/install">Jupyter</a>;</li>
<li>packages utilized in course materials (primarily numpy, pandas, altair, and scikit-learn).</li>
</ul>
<p>Managing package installations will require some (straightforward) use of the package installer <code>pip</code> or <code>pip3</code> in the terminal to retrieve/install packages from the Python Package Index repository. Documentation for specific packages (or a Google search) will indicate the appropriate <code>pip</code> command.</p>
</section>
</section>
<section id="policies" class="level2">
<h2 class="anchored" data-anchor-id="policies">Policies</h2>
<section id="communication" class="level3">
<h3 class="anchored" data-anchor-id="communication">Communication</h3>
<p>There are two primary means of communication outside of scheduled class meetings: office hours and a discussion board.</p>
<p>Course staff have <em>limited</em> availability via email. Course staff will make every effort to respond to individual communication within 48 weekday-hours on the following (or similar) matters:</p>
<ul>
<li>accommodations/extensions due to personal circumstances;</li>
<li>logistical issues such as access to materials or missing scores;</li>
<li>general advising.</li>
</ul>
<p><em>Email should <strong>not</strong> be used to ask content questions or submit assignments (unless specifically requested)</em>. Emails related to the following (or similar) matters may not receive replies and should be redirected:</p>
<table class="table">
<thead>
<tr class="header">
<th>Topic</th>
<th>Redirect to…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Troubleshooting codes</td>
<td>Discussion board</td>
</tr>
<tr class="even">
<td>Checking answers</td>
<td>Office hours or discussion board</td>
</tr>
<tr class="odd">
<td>Clarifying assignment content</td>
<td>Office hours or discussion board</td>
</tr>
<tr class="even">
<td>Assignment submission</td>
<td>Gradescope</td>
</tr>
<tr class="odd">
<td>Re-evaluation request</td>
<td>Gradescope</td>
</tr>
</tbody>
</table>
</section>
<section id="expected-time-commitment" class="level3">
<h3 class="anchored" data-anchor-id="expected-time-commitment">Expected time commitment</h3>
<p>The course is 4 credit units; each credit unit corresponds to an approximate time commitment of 3 hours. So, students should expect to allocate 12 hours per week to the course on average. Course staff are available to help any students spending considerably more time on the class balance the workload.</p>
</section>
<section id="scores-and-grades" class="level3">
<h3 class="anchored" data-anchor-id="scores-and-grades">Scores and grades</h3>
<p>Scores on submitted work can be monitored on Gradescope to ensure fair assignment of course grades. On any individual assignment, re-evaluation can be requested within one week of receiving a score. Requests for re-evaluation made beyond one week after publication of scores may or may not be considered on a discretionary basis.</p>
<p>Determination of letter grade assignments is made entirely at the discretion of the instructor based on the assessments outlined above and consistent with university policy. Students are not permitted to negotiate their grades, and are discouraged from requesting audits, recalculations, or verification of self-calculations after the course has concluded. The instructor is under no obligation to share the details of grade calculations with students or to respond to such requests.</p>
<p>If at the end of the course a student believes their grade was unfairly assigned, either due to discrimination or without basis in coursework, they are entitled to contest it according to the procedure <a href="https://my.sa.ucsb.edu/catalog/Current/AcademicPoliciesProcedures/ContestedGrades.aspx">outlined here</a>.</p>
</section>
<section id="conduct" class="level3">
<h3 class="anchored" data-anchor-id="conduct">Conduct</h3>
<p>Students are expected to uphold the <a href="http://studentconduct.sa.ucsb.edu/policies-procedures">student code of conduct</a> and to maintain integrity. All individually-submitted work must be an honest reflection of individual effort. Evidence of dishonest conduct will be discussed with the student(s) involved and reported to the Office of Student Conduct (OSC). Depending on the nature of the evidence and the violation, penalty in the course may range from a warning to loss of credit to automatic failure. For a definition and examples of dishonesty, a discussion of what constitutes an appropriate response from faculty, and an explanation of the reporting and investigation process, see the <a href="https://studentconduct.sa.ucsb.edu/academic-integrity">OSC page on academic integrity</a>.</p>
</section>
<section id="deadlines-and-late-work" class="level3">
<h3 class="anchored" data-anchor-id="deadlines-and-late-work">Deadlines and late work</h3>
<p>There is a one-hour grace period on all submission deadlines. After that, work may be submitted within 48 hours of the original deadline (not the deadline plus grace period) and will be considered late. Every student can submit two late assignments without penalty. Subsequent late submissions will be evaluated for 75% credit.</p>
</section>
<section id="accommodations" class="level3">
<h3 class="anchored" data-anchor-id="accommodations">Accommodations</h3>
<p>Reasonable accommodations will be made for any student with a qualifying disability. Such requests should be made through the Disabled Students Program (DSP). More information, instructions on how to access accommodations, and information on related resources can be found on <a href="https://dsp.sa.ucsb.edu/">the DSP website</a>.</p>
</section>
<section id="feedback" class="level3">
<h3 class="anchored" data-anchor-id="feedback">Feedback</h3>
<p>Toward the end of the term students will be given an opportunity to provide feedback about the course via ESCI. This feedback is valuable for improvement of the course in future terms, and students are strongly encouraged to provide thoughtful course evaluations. The identities of student respondents to ESCI surveys are not disclosed to instructors.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>